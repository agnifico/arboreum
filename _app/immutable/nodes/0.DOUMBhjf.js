import{t as k,a as p,c as ta}from"../chunks/CyouTt3M.js";import{R as K,_ as e,$ as t,a0 as S,Z as D,t as a,an as X,T as U,f as E,ao as ea,al as Z,D as sa,x as H}from"../chunks/BtkmG4fx.js";import{s as C,d as V,e as na}from"../chunks/D3ruXvtb.js";import{i as J}from"../chunks/KUbFRQoZ.js";import{s as la}from"../chunks/J_RdD4C_.js";import{s as W,a as j,c as $,l as wa,d as aa,b as I,e as ra,i as ia}from"../chunks/DHYswBcU.js";import{p as G,s as ga,a as oa}from"../chunks/C68jPPnU.js";var va=k('<div><a class="xp svelte-1mtbqy8"> </a> <div class="right-box svelte-1mtbqy8"><img alt="Saved File" class="icon svelte-1mtbqy8"></div></div>');function ca(q,s){K(s,!0),G(s,"disabled",3,!0);let h=X(()=>s.bg.includes(s.note.id));var c=va();let d;var o=e(c),P=e(o,!0);t(o);var n=S(o,2),F=e(n);t(n),t(c),D((M,T)=>{d=W(c,1,"file svelte-1mtbqy8",null,d,M),j(o,"href",`/read/${s.note.noteid??""}`),C(P,T),j(F,"src",s.note.icon)},[()=>({selected:a(h)}),()=>s.note.title.length>10?s.note.title.slice(0,6).trim()+"..":s.note.title]),p(q,c),U()}var da=k('<button><img src="/map.svg" alt="" class="svelte-16n4snt"></button>'),ua=k('<button type="button"><div class="switchLabel svelte-16n4snt"> </div> <div class="switchButton svelte-16n4snt"><div class="X svelte-16n4snt">&nbsp;</div></div></button>'),fa=k('<div><button type="button" class="toggleDelete svelte-16n4snt"> </button> <button type="button" class="deletePostButton svelte-16n4snt"><img src="/delete.svg" alt="" class="svelte-16n4snt"></button></div>'),_a=k('<button type="button" class="link svelte-16n4snt"><a class="svelte-16n4snt"> </a></button>'),ba=k("<button> </button>");function L(q,s){let h=G(s,"btnType",3,"btn-1"),c=G(s,"text",3,"xyz"),d=G(s,"fn",3,null),o=G(s,"deleteFn",3,null),P=G(s,"type",3,"button"),n=G(s,"active",3,!1),F=G(s,"link",3,"/"),M=G(s,"target",3,"_parent");var T=ta(),z=E(T);{var O=w=>{var m=da();let u;m.__click=function(...N){var f;(f=d())==null||f.apply(this,N)},D(N=>{j(m,"type",P()),u=W(m,1,$(h()),"svelte-16n4snt",u,N)},[()=>({active:n()})]),p(w,m)},B=(w,m)=>{{var u=f=>{var y=ua();y.__click=function(...l){var g;(g=d())==null||g.apply(this,l)};let R;var i=e(y),v=e(i,!0);t(i),ea(2),t(y),D(l=>{R=W(y,1,"switcher svelte-16n4snt",null,R,l),C(v,c())},[()=>({active:n()})]),p(f,y)},N=(f,y)=>{{var R=v=>{var l=fa();let g;var _=e(l);_.__click=function(...x){var A;(A=d())==null||A.apply(this,x)};var r=e(_,!0);t(_);var b=S(_,2);b.__click=function(...x){var A;(A=o())==null||A.apply(this,x)},t(l),D(x=>{g=W(l,1,"delete svelte-16n4snt",null,g,x),C(r,n()?"Delete":"Select")},[()=>({active:n()})]),p(v,l)},i=(v,l)=>{{var g=r=>{var b=_a(),x=e(b),A=e(x,!0);t(x),t(b),D(()=>{j(x,"href",F()),j(x,"target",M()),C(A,c())}),p(r,b)},_=r=>{var b=ba();let x;b.__click=function(...Q){var Y;(Y=d())==null||Y.apply(this,Q)};var A=e(b,!0);t(b),D(Q=>{j(b,"type",P()),x=W(b,1,$(h()),"svelte-16n4snt",x,Q),C(A,c())},[()=>({active:n()})]),p(r,b)};J(v,r=>{h()=="link"?r(g):r(_,!1)},l)}};J(f,v=>{h()=="delete"?v(R):v(i,!1)},y)}};J(w,f=>{h()=="switcher"?f(u):f(N,!1)},m)}};J(z,w=>{h()=="map-btn"?w(O):w(B,!1)})}p(q,T)}V(["click"]);var pa=k("<div><!></div>"),ma=k('<div class="svelte-je3etl"><div class="message svelte-je3etl"> </div> <div class="notes svelte-je3etl"><!></div> <div class="sidebar-btn-tray svelte-je3etl"><!></div></div>');function ya(q,s){K(s,!0);const[h,c]=oa(),d=()=>ga(F,"$notes",h);let o=Z(sa([])),P="sidebar",n=Z(!1),F=wa(()=>aa.notes.orderBy("createdAt").reverse().toArray());function M(){H(n,!a(n)),a(n)||H(o,[],!0)}function T(){return a(n)?"Select Notes to be deleted":"Showing All Notes"}async function z(){if(a(o).length===0){H(n,!1);return}const i=a(o).map(v=>v.id);await aa.notes.bulkDelete(i),H(o,[],!0),H(n,!1)}function O(i){if(!a(n))return;const v=a(o).findIndex(l=>l.id===i.id);v>-1?a(o).splice(v,1):a(o).push(i)}var B=ma();I(B,"",{},{"border-color":"#e07a5f",color:"#e07a5f"});var w=e(B);I(w,"",{},{color:"#e07a5f"});var m=e(w,!0);t(w);var u=S(w,2),N=e(u);{var f=i=>{var v=ta(),l=E(v);ra(l,1,d,g=>g.id,(g,_)=>{var r=pa(),b=e(r);const x=X(()=>!a(n)),A=X(()=>a(o).map(Q=>Q.id));ca(b,{get note(){return a(_)},get disabled(){return a(x)},get bg(){return a(A)},get sidebar_name(){return P}}),t(r),na("click",r,()=>O(a(_))),p(g,r)}),p(i,v)};J(N,i=>{d()&&i(f)})}t(u);var y=S(u,2),R=e(y);L(R,{btnType:"delete",fn:M,deleteFn:z,get active(){return a(n)}}),t(y),t(B),D(i=>{j(B,"id",P),j(B,"name",P),C(m,i)},[T]),p(q,B),U(),c()}V(["click"]);var ha=k("<span> </span> Note",1),xa=k("<span> </span>"),ka=k('<a class="svelte-ipu1o7"><img alt="note/tree-icon" class="tree-icon svelte-ipu1o7"> <div class="popover svelte-ipu1o7"><!></div></a>'),Pa=k('<div class="cell svelte-ipu1o7"><!></div>'),Sa=k('<div class="container svelte-ipu1o7"><div class="garden svelte-ipu1o7"></div></div>');function Ta(q,s){let h=JSON.parse(JSON.stringify(s.notes));const c=25,d=15;let o=["water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","waterPlant","water0","waterRock","water0","water0","waterPlant","waterPlant","water0","water0","water0","grass1","grass3","water0","water0","water0","waterRock","grass1","grass2","grass2","grass15","grass2","grass3","water0","water0","water0","grass11","grass12","water0","waterPlant","grass1","grass3","water0","waterPlant","grass11","grass2","grass5","grass5","grass3","water0","water0","grass1","grass5","grass5","grass9","waterPlant","grass7","grass6","water0","water0","water0","water0","water0","water0","grass1","grass5","grass5","grass3","water0","water0","grass7","grass8","grass5","grass6","water0","water0","grass4","grass5","grass6","waterPlant","water0","water0","grass14","water0","water0","water0","waterPlant","water0","grass1","grass5","grass5","grass8","grass8","grass3","water0","water0","water0","grass7","grass6","water0","grass1","grass5","grass5","grass9","water0","water0","waterPlant","grass14","waterRock","water0","water0","water0","grass1","grass5","grass5","grass9","water0","water0","grass13","water0","grass11","grass12","water0","grass13","water0","grass4","grass5","grass6","waterBoat2","water0","water0","grass1","grass6","water0","water0","water0","water0","grass4","grass5","grass6","water0","waterRock","water0","water0","water0","water0","water0","waterPlant","water0","grass1","grass5","grass8","grass9","water0","water0","grass1","grass5","grass9","water0","waterPlant","water0","water0","grass7","grass5","grass5","grass3","water0","water0","grass10","water0","water0","water0","water0","water0","grass4","grass6","water0","water0","water0","grass1","grass5","grass6","water0","water0","water0","water0","water0","water0","grass7","grass5","grass5","grass2","grass2","grass9","water0","grass11","grass12","water0","grass1","grass5","grass6","water0","water0","grass1","grass5","grass5","grass9","water0","water0","water0","water0","water0","water0","waterBoat1","grass7","grass5","grass5","grass9","water0","water0","waterPlant","water0","water0","grass4","grass5","grass6","water0","grass1","grass5","grass5","grass9","water0","grass1","grass3","water0","water0","waterPlant","water0","water0","water0","grass7","grass9","water0","waterRock","water0","water0","waterBoat1","water0","grass4","grass5","grass6","water0","grass7","grass8","grass9","water0","water0","grass7","grass9","water0","water0","water0","grass1","grass3","water0","water0","water0","water0","water0","water0","grass1","grass3","water0","grass7","grass8","grass6","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","grass7","grass9","water0","waterPlant","grass1","grass3","water0","grass1","grass5","grass6","water0","water0","water0","grass13","water0","grass1","grass2","grass3","waterPlant","grass1","grass3","water0","water0","water0","water0","water0","water0","waterPlant","grass11","grass8","grass9","water0","grass7","grass8","grass8","grass12","water0","water0","water0","water0","grass7","grass8","grass8","grass15","grass8","grass9","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","waterPlant","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0","water0"];var P=Sa(),n=e(P);I(n,"",{},{"--width":c,"--height":d}),ra(n,21,()=>o,ia,(F,M,T)=>{var z=Pa(),O=e(z);{var B=w=>{var m=ka();const u=X(()=>h.pop());var N=e(m),f=S(N,2);let y;var R=e(f);{var i=l=>{var g=ha(),_=E(g);I(_,"",{},{color:"#ffd6ad"});var r=e(_);t(_),ea(),D(()=>C(r,`${a(u).userid??""}'s`)),p(l,g)},v=l=>{var g=xa();I(g,"",{},{color:"#ffd6ad"});var _=e(g,!0);t(g),D(()=>C(_,a(u).title)),p(l,g)};J(R,l=>{a(u).title==""?l(i):l(v,!1)})}t(f),t(m),D(()=>{j(m,"href",`/read/${a(u).noteid??""}`),j(N,"src",a(u).icon),y=I(f,"",y,{content:a(u).title})}),p(w,m)};J(O,w=>{h.length>0&&!a(M).includes("water")&&Math.random(10)>.7&&w(B)})}t(z),D(w=>I(z,w),[()=>`
        grid-column: ${T%c+1}; 
        grid-row: ${Math.floor(T/c)+1};
        background-image: url("${"/tileset/"+a(M)+".png"}");
        `]),p(F,z)}),t(n),t(P),p(q,P)}var za=k('<button class="greenline svelte-puzui1">⇨</button>'),Ba=k('<!> <div class="super svelte-puzui1"><div id="topbar" class="svelte-puzui1"><div class="arboreum dynamic-text-shadow svelte-puzui1"><a href="/" class="svelte-puzui1">Arboreum</a></div> <div class="top-nav svelte-puzui1"><!></div></div> <div id="page-container" class="svelte-puzui1"><!> <!></div> <div class="controls svelte-puzui1"><!> <form action="/newleaf"><!></form> <form action="/newleaf" target="_blank"><!></form> <!></div></div>',1);function qa(q,s){K(s,!0);const h=!1;let c=Z(!0),d=Z(!1);function o(){H(c,!a(c))}function P(){H(d,!a(d))}var n=Ba(),F=E(n);{var M=r=>{Ta(r,{notes:[]})};J(F,r=>{a(d)&&r(M)})}var T=S(F,2),z=e(T),O=S(e(z),2),B=e(O);L(B,{btnType:"link",text:"About",type:"button",link:"/about"}),t(O),t(z);var w=S(z,2),m=e(w);{var u=r=>{ya(r,{notes:[]})},N=r=>{var b=za();b.__click=o,p(r,b)};J(m,r=>{a(c)?r(u):r(N,!1)})}var f=S(m,2);la(f,()=>s.children),t(w);var y=S(w,2),R=e(y);L(R,{get active(){return a(c)},text:"Sidebar",fn:o,btnType:"btn-1"});var i=S(R,2),v=e(i);L(v,{text:"Create New",type:"submit",btnType:"btn-2"}),t(i);var l=S(i,2),g=e(l);L(g,{text:"⇗",type:"submit",btnType:"btn-3"}),t(l);var _=S(l,2);return L(_,{btnType:"map-btn",text:"Map",get active(){return a(d)},fn:P}),t(y),t(T),p(q,n),U({ssr:h})}V(["click"]);export{qa as component};
